{"version":3,"file":"ActorRdfUpdateHypermedia.js","sourceRoot":"","sources":["ActorRdfUpdateHypermedia.ts"],"names":[],"mappings":";;;AAEA,yCAAuC;AAEvC;;;;;;;;;;GAUG;AACH,MAAsB,wBACpB,SAAQ,YAA8E;IAGtF;;;OAGG;IACH,YAAmB,IAAmC,EAAE,eAAuB;QAC7E,KAAK,CAAC,IAAI,CAAC,CAAC;QACZ,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;IACzC,CAAC;IAEM,KAAK,CAAC,IAAI,CAAC,MAAkC;QAClD,IAAI,MAAM,CAAC,oBAAoB,IAAI,IAAI,CAAC,eAAe,KAAK,MAAM,CAAC,oBAAoB,EAAE;YACvF,MAAM,IAAI,KAAK,CAAC,SAAS,IAAI,CAAC,IAAI,2CAA2C,MAAM,CAAC,oBAAoB,GAAG,CAAC,CAAC;SAC9G;QACD,OAAO,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IACnC,CAAC;CAGF;AArBD,4DAqBC","sourcesContent":["import type { IQuadDestination } from '@comunica/bus-rdf-update-quads';\nimport type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\n\n/**\n * A comunica actor for rdf-update-hypermedia events.\n *\n * Actor types:\n * * Input:  IActionRdfUpdateHypermedia:      The metadata in the document.\n * * Test:   <none>\n * * Output: IActorRdfUpdateHypermediaOutput: An RDF destination.\n *\n * @see IActionRdfUpdateHypermedia\n * @see IActorRdfUpdateHypermediaOutput\n */\nexport abstract class ActorRdfUpdateHypermedia\n  extends Actor<IActionRdfUpdateHypermedia, IActorTest, IActorRdfUpdateHypermediaOutput> {\n  protected readonly destinationType: string;\n\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   * @param destinationType - The destination type.\n   */\n  public constructor(args: IActorRdfUpdateHypermediaArgs, destinationType: string) {\n    super(args);\n    this.destinationType = destinationType;\n  }\n\n  public async test(action: IActionRdfUpdateHypermedia): Promise<IActorTest> {\n    if (action.forceDestinationType && this.destinationType !== action.forceDestinationType) {\n      throw new Error(`Actor ${this.name} is not able to handle destination type ${action.forceDestinationType}.`);\n    }\n    return this.testMetadata(action);\n  }\n\n  public abstract testMetadata(action: IActionRdfUpdateHypermedia): Promise<IActorTest>;\n}\n\nexport interface IActionRdfUpdateHypermedia extends IAction {\n  /**\n   * The URL of the destination that was fetched.\n   */\n  url: string;\n  /**\n   * A metadata key-value mapping.\n   */\n  metadata: Record<string, any>;\n  /**\n   * If the destination already exists.\n   */\n  exists: boolean;\n  /**\n   * The explicitly requested destination type.\n   * If set, the destination type of the actor MUST explicitly match the given forced type.\n   */\n  forceDestinationType?: string;\n}\n\nexport interface IActorRdfUpdateHypermediaOutput extends IActorOutput {\n  /**\n   * The destination for quads.\n   */\n  destination: IQuadDestination;\n}\n\nexport type IActorRdfUpdateHypermediaArgs = IActorArgs<\nIActionRdfUpdateHypermedia, IActorTest, IActorRdfUpdateHypermediaOutput>;\n\nexport type MediatorRdfUpdateHypermedia = Mediate<IActionRdfUpdateHypermedia, IActorRdfUpdateHypermediaOutput>;\n"]}