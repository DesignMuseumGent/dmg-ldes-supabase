{"version":3,"file":"ActionObserverHttp.js","sourceRoot":"","sources":["ActionObserverHttp.ts"],"names":[],"mappings":";;;AAGA,yCAAgD;AAEhD;;GAEG;AACH,MAAa,kBAAmB,SAAQ,qBAA6C;IAInF,4BAA4B;IAC5B;;OAEG;IACH,YAAmB,IAA6B;QAC9C,KAAK,CAAC,IAAI,CAAC,CAAC;QAPP,aAAQ,GAAG,CAAC,CAAC;QAQlB,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,GAAG,EAAE;YAC9C,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,2BAA2B;IAEpB,KAAK,CAAC,KAAuD,EAClE,MAAmB,EAAE,MAAiC;QACtD,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;CACF;AArBD,gDAqBC","sourcesContent":["import type { IActionHttp, IActorHttpOutput } from '@comunica/bus-http';\nimport type { ActorHttpInvalidateListenable } from '@comunica/bus-http-invalidate';\nimport type { Actor, IActionObserverArgs, IActorTest } from '@comunica/core';\nimport { ActionObserver } from '@comunica/core';\n\n/**\n * Observes HTTP actions, and maintains a counter of the number of requests.\n */\nexport class ActionObserverHttp extends ActionObserver<IActionHttp, IActorHttpOutput> {\n  public readonly httpInvalidator: ActorHttpInvalidateListenable;\n  public requests = 0;\n\n  /* eslint-disable max-len */\n  /**\n   * @param args - @defaultNested {<npmd:@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus>} bus\n   */\n  public constructor(args: IActionObserverHttpArgs) {\n    super(args);\n    this.bus.subscribeObserver(this);\n    this.httpInvalidator.addInvalidateListener(() => {\n      this.requests = 0;\n    });\n  }\n  /* eslint-enable max-len */\n\n  public onRun(actor: Actor<IActionHttp, IActorTest, IActorHttpOutput>,\n    action: IActionHttp, output: Promise<IActorHttpOutput>): void {\n    this.requests++;\n  }\n}\n\nexport interface IActionObserverHttpArgs extends IActionObserverArgs<IActionHttp, IActorHttpOutput> {\n  /* eslint-disable max-len */\n  /**\n   * An actor that listens to HTTP invalidation events\n   * @default {<default_invalidator> a <npmd:@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidateListenable.jsonld#ActorHttpInvalidateListenable>}\n   */\n  httpInvalidator: ActorHttpInvalidateListenable;\n  /* eslint-enable max-len */\n}\n"]}