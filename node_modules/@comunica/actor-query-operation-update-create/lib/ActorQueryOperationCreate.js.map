{"version":3,"file":"ActorQueryOperationCreate.js","sourceRoot":"","sources":["ActorQueryOperationCreate.ts"],"names":[],"mappings":";;;AACA,uEAAsG;AAMtG;;;GAGG;AACH,MAAa,yBAA0B,SAAQ,sDAAgD;IAG7F,YAAmB,IAAoC;QACrD,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACxB,CAAC;IAEM,KAAK,CAAC,aAAa,CAAC,SAAyB,EAAE,OAAuB;QAC3E,yCAAmB,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QAC7C,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,KAAK,CAAC,YAAY,CAAC,SAAyB,EAAE,OAAuB;QAE1E,+BAA+B;QAC/B,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC;YACzD,YAAY,EAAE;gBACZ,MAAM,EAAE,CAAE,SAAS,CAAC,MAAM,CAAE;gBAC5B,mBAAmB,EAAE,CAAC,SAAS,CAAC,MAAM;aACvC;YACD,OAAO;SACR,CAAC,CAAC;QAEH,OAAO;YACL,IAAI,EAAE,MAAM;YACZ,OAAO;SACR,CAAC;IACJ,CAAC;CACF;AA5BD,8DA4BC","sourcesContent":["import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { MediatorRdfUpdateQuads } from '@comunica/bus-rdf-update-quads';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation) actor that\n * handles SPARQL create operations.\n */\nexport class ActorQueryOperationCreate extends ActorQueryOperationTypedMediated<Algebra.Create> {\n  public readonly mediatorUpdateQuads: MediatorRdfUpdateQuads;\n\n  public constructor(args: IActorQueryOperationCreateArgs) {\n    super(args, 'create');\n  }\n\n  public async testOperation(operation: Algebra.Create, context: IActionContext): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Create, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Delegate to update-quads bus\n    const { execute } = await this.mediatorUpdateQuads.mediate({\n      createGraphs: {\n        graphs: [ operation.source ],\n        requireNonExistence: !operation.silent,\n      },\n      context,\n    });\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n\nexport interface IActorQueryOperationCreateArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * The RDF Update Quads mediator\n   */\n  mediatorUpdateQuads: MediatorRdfUpdateQuads;\n}\n"]}